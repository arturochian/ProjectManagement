<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Project Management by leonawicz</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/leonawicz/ProjectManagement">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/leonawicz/ProjectManagement/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/leonawicz/ProjectManagement/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Project Management</h1>
          <p>Project management project</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/leonawicz">leonawicz</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <hr>

<p>title: "Project Management"
author: Matthew Leonawicz
output:
  html_document:
    toc: true
    theme: united
    keep_md: true
  ioslides_presentation:
    widescreen: true
    keep_md: true
  pdf_document:
    toc: true</p>

<h2>
<a id="----highlight-zenburn" class="anchor" href="#----highlight-zenburn" aria-hidden="true"><span class="octicon octicon-link"></span></a>    highlight: zenburn</h2>

<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>This is a project management project.
While current projects are shown in the chart below, the aim of this project is the development of convenient <strong>R</strong>-related project management tools.</p>

<h3>
<a id="motivation" class="anchor" href="#motivation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Motivation</h3>

<p>I am working on these tools to enhance my own workflow across multiple <strong>R</strong> projects.</p>

<h3>
<a id="details" class="anchor" href="#details" aria-hidden="true"><span class="octicon octicon-link"></span></a>Details</h3>

<p><strong>R</strong> code for the project will be compiled into an <strong>R</strong> package, <code>projman</code> for easy use.
This is a personal package and will not be available anywhere but my github repository,
but you are welcome to explore the package and functions.
It is unlikely that you would manage your <strong>R</strong> projects in the same manner that I do,
but if you do, or just want some ideas, feel free to explore.</p>

<h4>
<a id="capabilities" class="anchor" href="#capabilities" aria-hidden="true"><span class="octicon octicon-link"></span></a>Capabilities</h4>

<p><code>projman</code> can create a new project. This essentially generates a specific directory structure which I use often to manage project files.
For an existing project, once <strong>R</strong> scripts have been created, <code>projman</code> can generate template <code>.Rmd</code> files for each.
For existing <code>.Rmd</code> files, <code>projman</code> can conveniently append these <strong>R</strong> Markdown files with a list of any new <code>knitr</code> code chunk names
in project <strong>R</strong> scripts being developed which have not yet been included in the respective <code>.Rmd</code> files.</p>

<h4>
<a id="limitations" class="anchor" href="#limitations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Limitations</h4>

<p>While <code>projman</code> assists with project documentation, this mainly takes the form of file generation and appending.
Documentation is unique to every project of course. Every script is different.
The most that is possible is to auto-fill commonly used code chunk names and metadata.
Each document must be written individually by the author, but when a project has many <strong>R</strong> scripts requiring documentation,
it is nice to not have to create all the corresponding <code>.Rmd</code> files by hand and copy and paste generic contents.</p>

<p>The project management code is not yet in package form.
Many additional features are yet to be incorporated.
Generic code relating to the further processing of <code>.Rmd</code> files into various other output files via <code>rmarkdown</code> and <code>knitr</code> will fold into this project,
but this has not been done yet.</p>

<h2>
<a id="related-items" class="anchor" href="#related-items" aria-hidden="true"><span class="octicon octicon-link"></span></a>Related items</h2>

<p>Currently there is only this unpackaged <strong>R</strong> script and accompanying code for a projects hierarchy diagram.
No additional related items are available at this time, but those referenced above will eventually be included.</p>

<h3>
<a id="files-and-data" class="anchor" href="#files-and-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Files and Data</h3>

<p>This project does not use any data. <code>sankey.R</code> is used to produce of project hierarchy diagram of my current projects.</p>

<h3>
<a id="code-flow" class="anchor" href="#code-flow" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code flow</h3>

<p>The Sankey diagram has become part of project management.
Each project has its own, detailing the relationships among <strong>R</strong> code and data relevent to the project,
and in some cases, how they relate to code and data files which are more general and span multiple projects.
This diagram be available for this project once more project code has been developed.</p>

<h3>
<a id="current-projects" class="anchor" href="#current-projects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Current projects</h3>

<p>Here is a project hierarchy diagram showing the relationships among all my current projects.</p>

 

<p>iframe.rChart{ width: 100%; height: 400px;}</p>

iframe.rChart{ width: 100%; height: 640px;}

<h2>
<a id="r-code" class="anchor" href="#r-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>R code</h2>

<h3>
<a id="template-objects" class="anchor" href="#template-objects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Template objects</h3>

<p>Character string objects are defined which are used to fill templates when generating new files for a project.
A tentative default path is also included since this code relates to my own work.</p>

<div class="highlight highlight-r"><pre><span class="pl-c"># For package 'projman'</span>

<span class="pl-c"># data</span>
<span class="pl-vo">rmd.header</span> <span class="pl-k">&lt;-</span> <span class="pl-s1"><span class="pl-pds">"</span>---<span class="pl-cce">\n</span>title: <span class="pl-cce">\"</span>INSERT_TITLE_HERE<span class="pl-cce">\"\n</span>author: Matthew Leonawicz<span class="pl-cce">\n</span>output:<span class="pl-cce">\n</span>  html_document:<span class="pl-cce">\n</span>    toc: true<span class="pl-cce">\n</span>    theme: united<span class="pl-cce">\n</span>    keep_md: true<span class="pl-cce">\n</span>  ioslides_presentation:<span class="pl-cce">\n</span>    widescreen: true<span class="pl-cce">\n</span>    keep_md: true<span class="pl-cce">\n</span>  pdf_document:<span class="pl-cce">\n</span>    toc: true<span class="pl-cce">\n</span>    highlight: zenburn<span class="pl-cce">\n</span>---<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>

<span class="pl-vo">rmd.knitr.setup</span> <span class="pl-k">&lt;-</span> <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n</span>```{r knitr_setup, echo=FALSE}<span class="pl-cce">\n</span>opts_chunk$set(cache=FALSE, eval=FALSE, tidy=TRUE, messages=FALSE, warnings=FALSE)<span class="pl-cce">\n</span>read_chunk(<span class="pl-cce">\"\"</span>)<span class="pl-cce">\n</span>```<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>

<span class="pl-vo">rmd.template</span> <span class="pl-k">&lt;-</span> <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n\n</span>## Introduction<span class="pl-cce">\n</span>ADD_TEXT_HERE<span class="pl-cce">\n\n</span>### Motivation<span class="pl-cce">\n</span>ADD_TEXT_HERE<span class="pl-cce">\n\n</span>### Details<span class="pl-cce">\n</span>ADD_TEXT_HERE<span class="pl-cce">\n\n</span>#### Capabilities<span class="pl-cce">\n</span>ADD_TEXT_HERE<span class="pl-cce">\n\n</span>#### Limitations<span class="pl-cce">\n</span>ADD_TEXT_HERE<span class="pl-cce">\n\n</span>## Related items<span class="pl-cce">\n\n</span>### Files and Data<span class="pl-cce">\n</span>ADD_TEXT_HERE<span class="pl-cce">\n\n</span>### Code flow<span class="pl-cce">\n</span>ADD_TEXT_HERE<span class="pl-cce">\n\n</span>```{r code_sankey, echo=F, eval=T}<span class="pl-cce">\n</span>```<span class="pl-cce">\n\n</span>```{r code_sankey_embed, echo=F, eval=T, comment=NA, results=<span class="pl-cce">\"</span>asis<span class="pl-cce">\"</span>, tidy=F}<span class="pl-cce">\n</span>```<span class="pl-cce">\n\n</span>## R code<span class="pl-cce">\n\n</span>### Setup<span class="pl-cce">\n</span>ADD_TEXT_HERE: EXAMPLE<span class="pl-cce">\n</span>Setup consists of loading required **R** packages and additional files, preparing any command line arguments for use, and defining functions and other **R** objects.<span class="pl-cce">\n\n</span><span class="pl-pds">"</span></span>

<span class="pl-c"># default path</span>
<span class="pl-vo">matt.proj.path</span> <span class="pl-k">&lt;-</span> <span class="pl-s1"><span class="pl-pds">"</span>C:/github<span class="pl-pds">"</span></span></pre></div>

<h3>
<a id="package-functions" class="anchor" href="#package-functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Package functions</h3>

<p>Functions are defined for creating new projects, generating <code>.Rmd</code> files for project <strong>R</strong> scripts,
and appending these <strong>R</strong> Markdown files with updated information from the corresponding <strong>R</strong> scripts as their development continues.
Additional functions will be incorporated later.</p>

<h4>
<a id="newproject" class="anchor" href="#newproject" aria-hidden="true"><span class="octicon octicon-link"></span></a>newProject</h4>

<p><code>newProject</code> creates a new named project directory structure at the specified file path.
If a directory with this project name already exists in this location on the file system, the function will abort.
Default project subdirectories are created unless a different vector of folder names is explicitly passed to <code>newProject</code>.
If one of the subdirectories is <code>docs</code> then the default vector of subdirectories under <code>docs</code> is also created.
This argument can also be set explicitly.</p>

<div class="highlight highlight-r"><pre><span class="pl-en">newProject</span> <span class="pl-k">&lt;-</span> <span class="pl-k">function</span>(<span class="pl-vo">name</span>, <span class="pl-vo">path</span>, <span class="pl-v">dirs</span> <span class="pl-k">=</span> c(<span class="pl-s1"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>docs<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>plots<span class="pl-pds">"</span></span>, 
    <span class="pl-s1"><span class="pl-pds">"</span>workspaces<span class="pl-pds">"</span></span>), <span class="pl-v">docs.dirs</span> <span class="pl-k">=</span> c(<span class="pl-s1"><span class="pl-pds">"</span>all<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>diagrams<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>ioslides<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>md<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>notebook<span class="pl-pds">"</span></span>, 
    <span class="pl-s1"><span class="pl-pds">"</span>pdf<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>Rmd<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>timeline<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>tufte<span class="pl-pds">"</span></span>)) {

    stopifnot(is.character(<span class="pl-vo">name</span>))
    <span class="pl-vo">name</span> <span class="pl-k">&lt;-</span> file.path(<span class="pl-vo">path</span>, <span class="pl-vo">name</span>)
    <span class="pl-k">if</span> (file.exists(<span class="pl-vo">name</span>)) 
        stop(<span class="pl-s1"><span class="pl-pds">"</span>This project already exists.<span class="pl-pds">"</span></span>)
    dir.create(<span class="pl-vo">name</span>, <span class="pl-v">recursive</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>, <span class="pl-v">showWarnings</span> <span class="pl-k">=</span> <span class="pl-c1">FALSE</span>)
    <span class="pl-k">if</span> (<span class="pl-k">!</span>file.exists(<span class="pl-vo">name</span>)) 
        stop(<span class="pl-s1"><span class="pl-pds">"</span>Directory appears invalid.<span class="pl-pds">"</span></span>)

    <span class="pl-vo">path.dirs</span> <span class="pl-k">&lt;-</span> file.path(<span class="pl-vo">name</span>, <span class="pl-vo">dirs</span>)
    sapply(<span class="pl-vo">path.dirs</span>, <span class="pl-vo">dir.create</span>, <span class="pl-v">showWarnings</span> <span class="pl-k">=</span> <span class="pl-c1">FALSE</span>)
    <span class="pl-vo">path.docs</span> <span class="pl-k">&lt;-</span> file.path(<span class="pl-vo">name</span>, <span class="pl-s1"><span class="pl-pds">"</span>docs<span class="pl-pds">"</span></span>, <span class="pl-vo">docs.dirs</span>)
    <span class="pl-k">if</span> (<span class="pl-s1"><span class="pl-pds">"</span>docs<span class="pl-pds">"</span></span> <span class="pl-k">%in%</span> <span class="pl-vo">dirs</span>) 
        sapply(<span class="pl-vo">path.docs</span>, <span class="pl-vo">dir.create</span>, <span class="pl-v">showWarnings</span> <span class="pl-k">=</span> <span class="pl-c1">FALSE</span>)
    cat(<span class="pl-s1"><span class="pl-pds">"</span>Project created.<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)
}</pre></div>

<h4>
<a id="genrmd" class="anchor" href="#genrmd" aria-hidden="true"><span class="octicon octicon-link"></span></a>genRmd</h4>

<p><code>genRmd</code> works on existing projects. It checks for existing <strong>R</strong> scripts.
If not <code>.R</code> files exist in the project's <code>code</code> directory, the function will abort.
Otherwise it will generate <code>.Rmd</code> template files for each of the <strong>R</strong> scripts it finds.
The <code>.Rmd</code> files are placed in the <code>/docs/Rmd</code> directory.
This function assumes this project directory exists.</p>

<div class="highlight highlight-r"><pre><span class="pl-en">genRmd</span> <span class="pl-k">&lt;-</span> <span class="pl-k">function</span>(<span class="pl-vo">path</span>, <span class="pl-v">replace</span> <span class="pl-k">=</span> <span class="pl-c1">FALSE</span>, <span class="pl-k">...</span>) {
    stopifnot(is.character(<span class="pl-vo">path</span>))
    <span class="pl-vo">files</span> <span class="pl-k">&lt;-</span> list.files(<span class="pl-vo">path</span>, <span class="pl-v">pattern</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>.R$<span class="pl-pds">"</span></span>, <span class="pl-v">full</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>)
    stopifnot(length(<span class="pl-vo">files</span>) <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>)
    <span class="pl-vo">rmd</span> <span class="pl-k">&lt;-</span> gsub(<span class="pl-s1"><span class="pl-pds">"</span>.R<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>.Rmd<span class="pl-pds">"</span></span>, basename(<span class="pl-vo">files</span>))
    <span class="pl-vo">rmd</span> <span class="pl-k">&lt;-</span> file.path(dirname(<span class="pl-vo">path</span>), <span class="pl-s1"><span class="pl-pds">"</span>docs/Rmd<span class="pl-pds">"</span></span>, <span class="pl-vo">rmd</span>)
    <span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-vo">replace</span>) 
        <span class="pl-vo">rmd</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">rmd</span>[<span class="pl-k">!</span>sapply(<span class="pl-vo">rmd</span>, <span class="pl-vo">file.exists</span>)]

    <span class="pl-en">sinkRmd</span> <span class="pl-k">&lt;-</span> <span class="pl-k">function</span>(<span class="pl-vo">x</span>, <span class="pl-k">...</span>) {
        <span class="pl-vo">y1</span> <span class="pl-k">&lt;-</span> <span class="pl-st">list</span>(<span class="pl-k">...</span>)<span class="pl-k">$</span><span class="pl-vo">rmd.header</span>
        <span class="pl-vo">y2</span> <span class="pl-k">&lt;-</span> <span class="pl-st">list</span>(<span class="pl-k">...</span>)<span class="pl-k">$</span><span class="pl-vo">rmd.knitr.setup</span>
        <span class="pl-vo">y3</span> <span class="pl-k">&lt;-</span> <span class="pl-st">list</span>(<span class="pl-k">...</span>)<span class="pl-k">$</span><span class="pl-vo">rmd.template</span>
        <span class="pl-k">if</span> (is.null(<span class="pl-vo">y1</span>)) 
            <span class="pl-vo">y1</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">rmd.header</span>
        <span class="pl-k">if</span> (is.null(<span class="pl-vo">y2</span>)) 
            <span class="pl-vo">y2</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">rmd.knitr.setup</span>
        <span class="pl-k">if</span> (is.null(<span class="pl-vo">y3</span>)) 
            <span class="pl-vo">y3</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">rmd.template</span>
        sink(<span class="pl-vo">x</span>)
        sapply(c(<span class="pl-vo">y1</span>, <span class="pl-vo">y2</span>, <span class="pl-vo">y3</span>), <span class="pl-k">function</span>(<span class="pl-vo">y</span>) <span class="pl-k">if</span> (is.character(<span class="pl-vo">y</span>)) 
            cat(<span class="pl-vo">y</span>))
        sink()
    }

    <span class="pl-k">if</span> (length(<span class="pl-vo">rmd</span>)) {
        sapply(<span class="pl-vo">rmd</span>, <span class="pl-vo">sinkRmd</span>, <span class="pl-k">...</span>)
        cat(<span class="pl-s1"><span class="pl-pds">"</span>.Rmd files created for each .R file.<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)
    } <span class="pl-k">else</span> {
        cat(<span class="pl-s1"><span class="pl-pds">"</span>No new .Rmd files created.<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)
    }
}</pre></div>

<h4>
<a id="chunknames" class="anchor" href="#chunknames" aria-hidden="true"><span class="octicon octicon-link"></span></a>chunkNames</h4>

<p><code>chunkNames</code> can be used in two ways.
It can return a list with length equal to the number of <code>.R</code> files,
where each list element is a vector of <strong>R</strong> code chunk names found in each <strong>R</strong> script.</p>

<p>Alternatively, with <code>append.new=TRUE</code>, this list has each vector matched element-wise against chunk names found in existing <code>.Rmd</code> files.
If no <code>.Rmd</code> files have yet been generated, the function will abort.
Otherwise, for the <code>.Rmd</code> files which do exist (and this may correspond to a subset of the <code>.R</code> files),
these <code>.Rmd</code> files are appended with a list of code chunk names found in the current corresponding <code>.R</code> files
which have not yet been integrated into the current state of the <code>.Rmd</code> files.
This fascilitates updating of <code>.Rmd</code> documentation when it falls behind scripts which have been updated.</p>

<div class="highlight highlight-r"><pre><span class="pl-en">chunkNames</span> <span class="pl-k">&lt;-</span> <span class="pl-k">function</span>(<span class="pl-vo">path</span>, <span class="pl-v">rChunkID</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span># @knitr<span class="pl-pds">"</span></span>, <span class="pl-v">rmdChunkID</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>```{r<span class="pl-pds">"</span></span>, <span class="pl-v">append.new</span> <span class="pl-k">=</span> <span class="pl-c1">FALSE</span>) {
    <span class="pl-vo">files</span> <span class="pl-k">&lt;-</span> list.files(<span class="pl-vo">path</span>, <span class="pl-v">pattern</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>.R$<span class="pl-pds">"</span></span>, <span class="pl-v">full</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>)
    stopifnot(length(<span class="pl-vo">files</span>) <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>)
    <span class="pl-vo">l1</span> <span class="pl-k">&lt;-</span> lapply(<span class="pl-vo">files</span>, <span class="pl-vo">readLines</span>)
    <span class="pl-vo">l1</span> <span class="pl-k">&lt;-</span> rapply(<span class="pl-vo">l1</span>, <span class="pl-k">function</span>(<span class="pl-vo">x</span>) <span class="pl-vo">x</span>[substr(<span class="pl-vo">x</span>, <span class="pl-c1">1</span>, nchar(<span class="pl-vo">rChunkID</span>)) <span class="pl-k">==</span> <span class="pl-vo">rChunkID</span>], 
        <span class="pl-v">how</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>replace<span class="pl-pds">"</span></span>)
    <span class="pl-vo">l1</span> <span class="pl-k">&lt;-</span> rapply(<span class="pl-vo">l1</span>, <span class="pl-k">function</span>(<span class="pl-vo">x</span>, <span class="pl-vo">p</span>) gsub(paste0(<span class="pl-vo">p</span>, <span class="pl-s1"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>), <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-vo">x</span>), <span class="pl-v">how</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>replace<span class="pl-pds">"</span></span>, 
        <span class="pl-v">p</span> <span class="pl-k">=</span> <span class="pl-vo">rChunkID</span>)
    <span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-vo">append.new</span>) 
        <span class="pl-k">return</span>(<span class="pl-vo">l1</span>)

    <span class="pl-en">appendRmd</span> <span class="pl-k">&lt;-</span> <span class="pl-k">function</span>(<span class="pl-vo">x</span>, <span class="pl-vo">rmd.files</span>, <span class="pl-vo">rChunks</span>, <span class="pl-vo">rmdChunks</span>, <span class="pl-vo">ID</span>) {
        <span class="pl-vo">r1</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">rmdChunks</span>[[<span class="pl-vo">x</span>]]
        <span class="pl-vo">r2</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">rChunks</span>[[<span class="pl-vo">x</span>]]
        <span class="pl-vo">r.new</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">r2</span>[<span class="pl-k">!</span>(<span class="pl-vo">r2</span> <span class="pl-k">%in%</span> <span class="pl-vo">r1</span>)]
        <span class="pl-k">if</span> (length(<span class="pl-vo">r.new</span>)) {
            <span class="pl-vo">r.new</span> <span class="pl-k">&lt;-</span> paste0(<span class="pl-vo">ID</span>, <span class="pl-s1"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>, <span class="pl-vo">r.new</span>, <span class="pl-s1"><span class="pl-pds">"</span>}<span class="pl-cce">\n</span>```<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, <span class="pl-v">collapse</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>)  <span class="pl-c"># Hard coded brace and backticks</span>
            sink(<span class="pl-vo">rmd.files</span>[<span class="pl-vo">x</span>], <span class="pl-v">append</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>)
            cat(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n</span>NEW_CODE_CHUNKS<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)
            cat(<span class="pl-vo">r.new</span>)
            sink()
            paste(basename(<span class="pl-vo">rmd.files</span>[<span class="pl-vo">x</span>]), <span class="pl-s1"><span class="pl-pds">"</span>appended with new chunk names from .R file<span class="pl-pds">"</span></span>)
        } <span class="pl-k">else</span> paste(<span class="pl-s1"><span class="pl-pds">"</span>No new chunk names appended to<span class="pl-pds">"</span></span>, basename(<span class="pl-vo">rmd.files</span>[<span class="pl-vo">x</span>]))
    }

    <span class="pl-vo">rmd</span> <span class="pl-k">&lt;-</span> gsub(<span class="pl-s1"><span class="pl-pds">"</span>.R<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>.Rmd<span class="pl-pds">"</span></span>, basename(<span class="pl-vo">files</span>))
    <span class="pl-vo">rmd</span> <span class="pl-k">&lt;-</span> file.path(dirname(<span class="pl-vo">path</span>), <span class="pl-s1"><span class="pl-pds">"</span>docs/Rmd<span class="pl-pds">"</span></span>, <span class="pl-vo">rmd</span>)
    <span class="pl-vo">rmd</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">rmd</span>[sapply(<span class="pl-vo">rmd</span>, <span class="pl-vo">file.exists</span>)]
    stopifnot(length(<span class="pl-vo">rmd</span>) <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>)  <span class="pl-c"># Rmd files must exist</span>
    <span class="pl-vo">files.ind</span> <span class="pl-k">&lt;-</span> match(gsub(<span class="pl-s1"><span class="pl-pds">"</span>.Rmd<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, basename(<span class="pl-vo">rmd</span>)), gsub(<span class="pl-s1"><span class="pl-pds">"</span>.R<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, basename(<span class="pl-vo">files</span>)))  <span class="pl-c"># Rmd exist for which R script</span>
    <span class="pl-vo">l2</span> <span class="pl-k">&lt;-</span> lapply(<span class="pl-vo">rmd</span>, <span class="pl-vo">readLines</span>)
    <span class="pl-vo">l2</span> <span class="pl-k">&lt;-</span> rapply(<span class="pl-vo">l2</span>, <span class="pl-k">function</span>(<span class="pl-vo">x</span>) <span class="pl-vo">x</span>[substr(<span class="pl-vo">x</span>, <span class="pl-c1">1</span>, nchar(<span class="pl-vo">rmdChunkID</span>)) <span class="pl-k">==</span> <span class="pl-vo">rmdChunkID</span>], 
        <span class="pl-v">how</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>replace<span class="pl-pds">"</span></span>)
    <span class="pl-vo">l2</span> <span class="pl-k">&lt;-</span> rapply(<span class="pl-vo">l2</span>, <span class="pl-k">function</span>(<span class="pl-vo">x</span>, <span class="pl-vo">p</span>) gsub(paste0(<span class="pl-vo">p</span>, <span class="pl-s1"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>), <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-vo">x</span>), <span class="pl-v">how</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>replace<span class="pl-pds">"</span></span>, 
        <span class="pl-v">p</span> <span class="pl-k">=</span> gsub(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\\</span>{<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\\\\</span>{<span class="pl-pds">"</span></span>, <span class="pl-vo">rmdChunkID</span>))
    <span class="pl-vo">l2</span> <span class="pl-k">&lt;-</span> rapply(<span class="pl-vo">l2</span>, <span class="pl-k">function</span>(<span class="pl-vo">x</span>) gsub(<span class="pl-s1"><span class="pl-pds">"</span>}<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, sapply(strsplit(<span class="pl-vo">x</span>, <span class="pl-s1"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>), <span class="pl-s1"><span class="pl-pds">"</span>[[<span class="pl-pds">"</span></span>, 
        <span class="pl-c1">1</span>)), <span class="pl-v">how</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>replace<span class="pl-pds">"</span></span>)
    sapply(<span class="pl-c1">1</span><span class="pl-k">:</span>length(<span class="pl-vo">rmd</span>), <span class="pl-vo">appendRmd</span>, <span class="pl-v">rmd.files</span> <span class="pl-k">=</span> <span class="pl-vo">rmd</span>, <span class="pl-v">rChunks</span> <span class="pl-k">=</span> <span class="pl-vo">l1</span>[<span class="pl-vo">files.ind</span>], 
        <span class="pl-v">rmdChunks</span> <span class="pl-k">=</span> <span class="pl-vo">l2</span>, <span class="pl-v">ID</span> <span class="pl-k">=</span> <span class="pl-vo">rmdChunkID</span>)
}</pre></div>

<p>Regarding the creation and updating of <code>.Rmd</code> files, <code>projman</code> simply assumes that there will be one <strong>R</strong> Markdown file corresponding to one <strong>R</strong> script.
This is not always the case for a given project, but again, the purpose is to generate basic templates.
Unnecessary files can always be deleted later, or edits made such that one <strong>R</strong> Markdown file reads multiple <strong>R</strong> scripts,
as is the case with the <code>.Rmd</code> file used to generate this document.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>